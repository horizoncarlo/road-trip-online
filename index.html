<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <title>Road Trip!</title>
    <meta name="viewport" content="width=device-width, height=device-height, initial-scale=1" />
    <link rel="icon" href="data:image/svg+xml,<svg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 100 100%22><text y=%22.9em%22 font-size=%2290%22>üöó</text></svg>"/>
    <link rel="stylesheet" type="text/css" href="./main.css"/>
    
    <!-- Bring in Alpine.js -->
    <script defer src="https://cdnjs.cloudflare.com/ajax/libs/alpinejs/3.13.5/cdn.min.js"></script>
    
    <!-- Go old fashioned and use jQueryUI for the drag and drop - fit better than Dragula and Droppable.js -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.7.1/jquery.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jqueryui/1.13.2/jquery-ui.min.js"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/jqueryui/1.13.2/themes/base/jquery-ui.min.css">
    
    <!-- Throw in a simple toast notification system instead of rolling our own. See the end of <body> for the JS -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/notyf/3.10.0/notyf.min.css">
  </head>

  <body>
    <div x-data="{ resources: resources }">
      Fuel: <span x-text="resources.fuel"></span>
      Fun: <span x-text="resources.fun"></span>
      Distance: <span x-text="resources.distance"></span>
      Memories: <span x-text="resources.memories"></span>
    </div>
    
    <button onclick="resetDicePositions(); rollAllDice()">Roll All</button>
    <button onclick="rerollSelected()">Reroll Selected</button>
    <!-- TODO +1/-1 one selected dice by spending 2 Memories -->
    <button onclick="tryToScore()">Score</button>
    
    <template x-data="{ loop: allDice }" x-for="(diceObj) in loop">
    <div x-bind:id="'wrapper' + diceObj.diceIndex" x-bind:data-index="diceObj.diceIndex"
         x-bind:class="diceObj.isSelected ? 'dice-wrapper-selected': ''"
         class="dice-wrapper">
      <div x-bind:id="'hover' + diceObj.diceIndex" class="allow-hover">
        <div x-bind:id="'dice' + diceObj.diceIndex" class="dice">
          <div class="dice-face dice-face-1"><span class="dice-pip"></span></div>
          <div class="dice-face dice-face-2"><span class="dice-pip"></span><span class="dice-pip"></span></div>
          <div class="dice-face dice-face-3"><span class="dice-pip"></span><span class="dice-pip"></span><span class="dice-pip"></span></div>
          <div class="dice-face dice-face-4">
            <div class="column"><span class="dice-pip"></span><span class="dice-pip"></span></div>
            <div class="column"><span class="dice-pip"></span><span class="dice-pip"></span></div>
          </div>
          <div class="dice-face dice-face-5">
            <div class="column"><span class="dice-pip"></span><span class="dice-pip"></span></div>
            <div class="column"><span class="dice-pip"></span></div>
            <div class="column"><span class="dice-pip"></span><span class="dice-pip"></span></div>
          </div>
          <div class="dice-face dice-face-6">
            <div class="column"><span class="dice-pip"></span><span class="dice-pip"></span><span class="dice-pip"></span></div>
            <div class="column"><span class="dice-pip"></span><span class="dice-pip"></span><span class="dice-pip"></span></div>
          </div>
        </div>
      </div>
    </div>
    </template>
    
    <br/>
    
    <div id="traffic" x-data="{ label: labelObj.traffic }" class="dice-dropzone" dice-allowed="2">
      <label x-text="label"></label>
      <span class="dice-socket">‚öÅ</span>
    </div>
    <div id="hunger" x-data="{ label: labelObj.hunger }" class="dice-dropzone" dice-allowed="3">
      <label x-text="label"></label>
      <span class="dice-socket">‚öÇ</span>
    </div>
    <div id="music" x-data="{ label: labelObj.music }" class="dice-dropzone" dice-allowed="5">
      <label x-text="label"></label>
      <span class="dice-socket">‚öÑ</span>
    </div>
    <br/>
    <div id="restStop" x-data="{ label: labelObj.restStop }" class="dice-dropzone" dice-allowed="4">
      <label x-text="label"></label>
      <span class="dice-socket">‚öÉ</span>
    </div>
    <br/>
    <div id="lost" x-data="{ label: labelObj.lost }" class="dice-dropzone" dice-allowed="1">
      <label x-text="label"></label>
      <span class="dice-socket">‚öÄ</span>
    </div>
    <div id="scenicDetour" x-data="{ label: labelObj.scenicDetour }" class="dice-dropzone" dice-allowed="6">
      <label x-text="label"></label>
      <span class="dice-socket">‚öÖ</span>
    </div>
    <br/>
    <div id="route" x-data="{ label: labelObj.route }" class="dice-dropzone" dice-allowed="1">
      <label x-text="label"></label>
      <span class="dice-socket">‚öÄ</span>
    </div>
    <div id="travel" x-data="{ label: labelObj.travel }" class="dice-dropzone" dice-allowed="6">
      <label x-text="label"></label>
      <span class="dice-socket">‚öÖ</span>
    </div>
    
    <div id="dialog-lost" title="How to use Lost?">
      You have Lost dice, which each give -2 to Fuel <i>or</i> Fun.
      <br/><br/>
      How do you want to apply Lost?
    </div>
    
    <script src="https://cdnjs.cloudflare.com/ajax/libs/notyf/3.10.0/notyf.min.js"></script>
    <script src="./game.js"></script>
  </body>
</html>
